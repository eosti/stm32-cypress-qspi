<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32 Cypress QSPI: STM32 Cypress QSPI</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STM32 Cypress QSPI
   </div>
   <div id="projectbrief">A library for communicating with Cypress FL- series QSPI flash memory chips</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">STM32 Cypress QSPI </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a>A library for communicating with Cypress FL- series QSPI flash memory chips</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Overview</h1>
<p>This library offers a number of helper functions to simplify communications by black-boxing the QSPI HAL function. All functions return type <code>HAL_StatusTypeDef</code> which will typically be either <code>HAL_OK</code> when the function succeeded, or <code>HAL_ERROR</code> if any error was encountered.</p>
<p>All functions have a <b>blocking</b> mode, where the functions will wait for the operation to complete. While acceptable for shorter operations, it is not preferred for longer operations as no other functions can be run at the same time.</p>
<p>Most functions have an <b>interrupt</b> (or IT) mode, where the function will offload operations to the QSPI peripheral. This allows the QSPI peripheral to run operations and interrupt only when more data is needed, so that the processor can do other things in the interim. Once the operation is completed, the QSPI peripheral will trigger an user-defined interrupt using the NVIC interface. This is preferred for any longer operations, such as reads, writes, or erases.</p>
<p>A few functions have a <b>direct memory access</b> (or DMA) mode, where the QSPI peripheral is granted direct access to system memory. This means that the QSPI peripheral no longer needs to trigger an interrupt every time it needs more data. However, due to the overhead associated with configuring DMA, this mode is only advantageous in longer reads or writes. Like IT mode, the QSPI peripheral will trigger an user-defined interrupt once the operation is completed.</p>
<p>For any function using interrupts, the user should verify that no errors occurred during the operation, typically by using <a class="el" href="group__functions.html#gab5bd26e805230317b35b391c77972b1d">Cypress_QSPI_CheckForErrors</a>.</p>
<p>All documentation is generated by Doxygen, and is hosted <a href="https://eosti.github.io/stm32-cypress-qspi">here</a>.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Usage</h1>
<p>Use STM32CubeIDE to enable the QUADSPI module. Configure the peripheral according to the specs of the flash memory. The most important changes are the flash size (edit to the number of bits in the address space, e.g. a 512 Mb flash will take 29 bits to address) and to enable the QUADSPI global interrupt if IT or DMA modes are used. Additionally, register callbacks must be enabled, under Project Manager &gt; Advanced Settings &gt; Register Callback &gt; QUADSPI &gt; Enable.</p>
<p>After generating the code, there will be a <code>QSPI_HandleTypeDef hqspi;</code>, which is the handle that you will pass to all functions.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Compatibility</h1>
<p>The target controller must have a hardware QSPI peripheral. This code was tested using an STM32H7 MCU, but many other families have the QSPI peripheral.</p>
<p>The flash memory must be from the Cypress FL- series, and must have QSPI capabilities. This code was tested using the S25FL512S chip, but many other models are compatible.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Example</h1>
<p>A example using this library is included for reference, based on the HAL QSPI examples built into STM32CubeIDE. A new project should be created, and then the example code can be copied into <code>main.c</code> and <code>main.h</code>, and the library files copied into the correct location.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Issues</h1>
<p>Any issues, comments, complaints, suggestions? File an issue! Or, better yet, submit a PR! </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Jul 20 2021 01:56:45 for STM32 Cypress QSPI by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
